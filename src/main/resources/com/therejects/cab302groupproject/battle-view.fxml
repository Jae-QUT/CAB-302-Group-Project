<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.*?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.layout.*?>

<StackPane xmlns="http://javafx.com/javafx/21"
           xmlns:fx="http://javafx.com/fxml/1"
           fx:controller="com.therejects.cab302groupproject.controller.BattleGUI"
           stylesheets="@../../../ui/JaeGen.css"
           styleClass="app-root">

   <!-- Fullscreen background -->
   <ImageView fx:id="battleBackground"
              preserveRatio="false"
              smooth="true"
              pickOnBounds="true"
              fitWidth="800"
              fitHeight="600"
              StackPane.alignment="CENTER"/>

   <!-- Main layout on top of background -->
   <BorderPane prefHeight="600" prefWidth="800">

      <!-- TOP + CENTER (HP bars + sprites) -->
      <center>
         <VBox alignment="CENTER" spacing="10">

            <!-- HP bars -->
            <HBox spacing="400" alignment="CENTER" style="-fx-padding: 10;">
               <VBox alignment="CENTER_LEFT" spacing="5">
                  <Label fx:id="playerName" text="Player 1"/>
                  <ProgressBar fx:id="playerHp" prefWidth="250" progress="1.0"/>
                  <Label fx:id="playerHpLabel" text="50 / 50"/>
               </VBox>

               <VBox alignment="CENTER_RIGHT" spacing="5">
                  <Label fx:id="enemyName" text="Player 2"/>
                  <ProgressBar fx:id="enemyHp" prefWidth="250" progress="1.0"/>
                  <Label fx:id="enemyHpLabel" text="50 / 50"/>
               </VBox>
            </HBox>

            <!-- Sprites -->
            <HBox alignment="CENTER" spacing="200">
               <ImageView fx:id="playerSprite"
                          fitHeight="280" fitWidth="220"
                          preserveRatio="true"/>
               <ImageView fx:id="enemySprite"
                          fitHeight="280" fitWidth="220"
                          preserveRatio="true"/>
            </HBox>

         </VBox>
      </center>

      <!-- BOTTOM: Battle hub -->
      <bottom>
         <AnchorPane prefHeight="120" style="-fx-padding: 20;">
            <Label fx:id="battleMessage" text="Battle!"
                   AnchorPane.leftAnchor="12" AnchorPane.topAnchor="12"/>

            <GridPane fx:id="mainMenu" hgap="10" vgap="10"
                      AnchorPane.bottomAnchor="12"
                      AnchorPane.rightAnchor="100">
               <columnConstraints>
                  <ColumnConstraints percentWidth="50"/>
                  <ColumnConstraints percentWidth="50"/>
               </columnConstraints>
               <rowConstraints>
                  <RowConstraints percentHeight="50"/>
                  <RowConstraints percentHeight="50"/>
               </rowConstraints>

               <Button fx:id="fightButton" onAction="#onFight" text="Attack"
                       prefWidth="150" prefHeight="44"
                       GridPane.columnIndex="0" GridPane.rowIndex="0"/>
               <Button fx:id="itemButton" onAction="#onItems" text="Items"
                       prefWidth="150" prefHeight="44"
                       GridPane.columnIndex="1" GridPane.rowIndex="0"/>
               <Button fx:id="switchButton" onAction="#onSwitch" text="Mons"
                       prefWidth="150" prefHeight="44"
                       GridPane.columnIndex="0" GridPane.rowIndex="1"/>
               <Button fx:id="forfeitButton" onAction="#onForfeit" text="Forfeit"
                       prefWidth="150" prefHeight="44"
                       GridPane.columnIndex="1" GridPane.rowIndex="1"/>
            </GridPane>

            <VBox fx:id="subMenu" spacing="8" visible="false"
                  AnchorPane.bottomAnchor="12" AnchorPane.rightAnchor="100"/>
         </AnchorPane>
      </bottom>

   </BorderPane>
</StackPane>
